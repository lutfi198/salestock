define(["ojs/ojcore","knockout","jquery","ojs/ojknockout","promise","ojs/ojlistview","ojs/ojarraytabledatasource","ojs/ojbutton"],function(a,b,c){function d(){var d=this;d.url="http://swapi.co/api/planets/?format=json",d.dataSource=new a.ArrayTableDataSource([],{idAttribute:"id"}),d.name=b.observable(""),d.rotation_period=b.observable(""),d.orbital_period=b.observable(""),d.diameter=b.observable(""),d.climate=b.observable(""),d.gravity=b.observable(""),d.terrain=b.observable(""),d.surface_water=b.observable(""),d.population=b.observable(""),d.gotoList=function(a,b){c("#listview").ojListView("option","currentItem",null),d.slide()},d.loadMore=function(a,b){d.loadData()},d.gotoContent=function(a,b){if("currentItem"===b.option&&null!=b.value){var c=d.dataSource.get(b.value);c.then(function(a){d.name(a.data.name),d.rotation_period(a.data.rotation_period),d.orbital_period(a.data.orbital_period),d.diameter(a.data.diameter),d.climate(a.data.climate),d.gravity(a.data.gravity),d.terrain(a.data.terrain),d.surface_water(a.data.surface_water),d.population(a.data.population),d.slide()})}},d.slide=function(){c("#page1").toggleClass("drill-page1-hide"),c("#page2").toggleClass("drill-page2-hide")},d.loadData=function(){c("#loadMoreButton").ojButton("option","disabled",!0),c("#loadMoreButton").ojButton("option","label","Loading..."),c.getJSON(d.url).done(function(a){d.url=a.next,null!=d.url?d.enableLoadMoreButton():c("#loadMoreButton").ojButton("option","label","Load More");for(var b=0;b<a.results.length;b++){var e=a.results[b];e.id=b,d.dataSource.add(e,null)}}).fail(function(a,b,c){d.enableLoadMoreButton()})},d.enableLoadMoreButton=function(){c("#loadMoreButton").ojButton("option","disabled",!1),c("#loadMoreButton").ojButton("option","label","Load More")},d.loadData()}return d});